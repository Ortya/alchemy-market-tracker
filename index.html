<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>装備ステータス計算</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: sans-serif;
      margin: 10px;
    }
    .tabs {
      display: flex;
      margin-bottom: 10px;
    }
    .tab {
      padding: 10px 20px;
      background-color: #eee;
      border: 1px solid #ccc;
      margin-right: 5px;
      cursor: pointer;
    }
    .tab.active {
      background-color: #ddd;
      font-weight: bold;
    }
    .items, .selected-items {
      display: none;
      margin-bottom: 10px;
    }
    .items.active {
      display: block;
    }
    .item-button {
      display: block;
      width: 100%;
      padding: 8px;
      margin-bottom: 4px;
      text-align: left;
      border: 1px solid #ccc;
      background: #f9f9f9;
      cursor: pointer;
    }
    .selected-items {
      margin-top: 20px;
    }
    .selected-items h3 {
      margin-bottom: 5px;
    }
    .selected-list {
      background: #f1f1f1;
      padding: 10px;
      border: 1px solid #ccc;
      min-height: 60px;
    }
    .table-wrapper {
      overflow-x: auto;
      margin-top: 15px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: auto;
    }
    th, td {
      padding: 6px 8px;
      text-align: center;
      font-size: 14px;
      min-width: 60px;
      border: 1px solid #ccc;
      white-space: nowrap;
    }
  </style>
</head>
<body>

<h2>装備ステータス計算</h2>

<div class="tabs">
  <div class="tab active" data-tab="weapon">武器</div>
  <div class="tab" data-tab="foot">足具</div>
  <div class="tab" data-tab="accessory">アクセサリー</div>
</div>

<div id="weapon" class="items active"></div>
<div id="foot" class="items"></div>
<div id="accessory" class="items"></div>

<div class="selected-items">
  <h3>選んだ装備:</h3>
  <div class="selected-list" id="selectedList"></div>
</div>

<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th>STR</th><th>DEX</th><th>AGI</th><th>INT</th><th>VIT</th><th>LUK</th>
      </tr>
    </thead>
    <tbody>
      <tr id="totalRow">
        <td>0%</td><td>0%</td><td>0%</td><td>0%</td><td>0%</td><td>0%</td>
      </tr>
    </tbody>
  </table>
</div>

<script>
const items = {
  weapon: [
    { name: "鉄の剣", STR: 40, DEX: 20, AGI: 10, INT: 10, VIT: 10, LUK: 10 },
    { name: "精霊の弓", STR: 20, DEX: 40, AGI: 20, INT: 10, VIT: 5, LUK: 5 }
  ],
  foot: [
    { name: "レザーブーツ", STR: 20, DEX: 20, AGI: 40, INT: 0, VIT: 20, LUK: 0 },
    { name: "神秘のブーツ", STR: 13.3, DEX: 13.3, AGI: 53.4, INT: 0, VIT: 20, LUK: 0 }
  ],
  accessory: [
    { name: "竜王のブレスレット", STR: 18.75, DEX: 18.75, AGI: 18.75, INT: 12.5, VIT: 18.75, LUK: 12.5 },
    { name: "ミスティック・オーブ", STR: 10, DEX: 12.5, AGI: 27.5, INT: 27.5, VIT: 12.5, LUK: 10 }
  ]
};

const tabs = document.querySelectorAll('.tab');
const itemContainers = document.querySelectorAll('.items');
const selectedList = document.getElementById('selectedList');
const totalRow = document.getElementById('totalRow');

let selectedItems = {};

function updateTotals() {
  const total = { STR: 0, DEX: 0, AGI: 0, INT: 0, VIT: 0, LUK: 0 };
  selectedList.innerHTML = '';

  for (let key in selectedItems) {
    const item = selectedItems[key];
    if (item) {
      selectedList.innerHTML += `<div>${item.name}</div>`;
      for (let stat in total) {
        total[stat] += item[stat];
      }
    }
  }

  for (let stat in total) {
    const cell = totalRow.querySelector(`td:nth-child(${Object.keys(total).indexOf(stat)+1})`);
    cell.textContent = total[stat].toFixed(2) + '%';
  }
}

tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    itemContainers.forEach(c => c.classList.remove('active'));
    document.getElementById(tab.dataset.tab).classList.add('active');
  });
});

for (let category in items) {
  const container = document.getElementById(category);
  items[category].forEach(item => {
    const btn = document.createElement('button');
    btn.textContent = item.name;
    btn.className = 'item-button';
    btn.onclick = () => {
      selectedItems[category] = item;
      updateTotals();
    };
    container.appendChild(btn);
  });
}

updateTotals();
</script>

</body>
</html>