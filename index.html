<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>装備ステータス合計表示</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
    .tabs {
      display: flex;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .tab-button {
      padding: 10px 15px;
      border: 1px solid #ccc;
      cursor: pointer;
      margin-right: 5px;
      background-color: #f5f5f5;
      border-radius: 4px 4px 0 0;
    }
    .tab-button.active {
      background-color: #fff;
      border-bottom: none;
      font-weight: bold;
    }
    .tab-content {
      display: none;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 0 0 4px 4px;
      background: #fff;
    }
    .tab-content.active {
      display: block;
    }
    select {
      width: 100%;
      margin-bottom: 10px;
      padding: 6px;
    }
    .table-wrapper {
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }
    th, td {
      padding: 4px;
      text-align: center;
      font-size: 13px;
      min-width: 45px;
      max-width: 60px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      border: 1px solid #ccc;
    }
    .total-row {
      font-weight: bold;
      background-color: #eef;
    }
    .selected-names {
      margin-bottom: 8px;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <h1>装備ステータス合計表示</h1>

  <div class="tabs">
    <div class="tab-button active" data-tab="weapons">武器</div>
    <div class="tab-button" data-tab="armor">防具</div>
    <div class="tab-button" data-tab="boots">足具</div>
    <div class="tab-button" data-tab="accessories">アクセサリー</div>
  </div>

  <div id="weapons" class="tab-content active">
    <select id="weaponSelect" onchange="updateTotal()">
      <option value="">-- 武器を選択 --</option>
      <option value="20,20,30,0,30,0">鉄の剣</option>
      <option value="0,25,25,25,0,25">魔法の杖</option>
    </select>
  </div>

  <div id="armor" class="tab-content">
    <select id="armorSelect" onchange="updateTotal()">
      <option value="">-- 防具を選択 --</option>
      <option value="0,0,0,40,60,0">布のローブ</option>
      <option value="30,0,0,0,70,0">ドラゴンスキンアーマー</option>
    </select>
  </div>

  <div id="boots" class="tab-content">
    <select id="bootsSelect" onchange="updateTotal()">
      <option value="">-- 足具を選択 --</option>
      <option value="20,20,40,0,20,0">レザーブーツ</option>
      <option value="0,0,40,20,20,20">布製のブーツ</option>
    </select>
  </div>

  <div id="accessories" class="tab-content">
    <select id="accessorySelect" onchange="updateTotal()">
      <option value="">-- アクセサリーを選択 --</option>
      <option value="20,20,20,20,20,0">銅の指輪</option>
      <option value="18.75,18.75,18.75,12.5,18.75,12.5">竜王のブレスレット</option>
    </select>
  </div>

  <div class="selected-names" id="selectedNames">
    装備: なし
  </div>

  <h2>合計ステータス（%）</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>STR</th><th>DEX</th><th>AGI</th><th>INT</th><th>VIT</th><th>LUK</th>
        </tr>
      </thead>
      <tbody>
        <tr class="total-row">
          <td id="totalSTR">0%</td>
          <td id="totalDEX">0%</td>
          <td id="totalAGI">0%</td>
          <td id="totalINT">0%</td>
          <td id="totalVIT">0%</td>
          <td id="totalLUK">0%</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script>
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        tabButtons.forEach(b => b.classList.remove('active'));
        tabContents.forEach(tc => tc.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    function updateTotal() {
      const selects = [
        { id: 'weaponSelect', label: '武器' },
        { id: 'armorSelect', label: '防具' },
        { id: 'bootsSelect', label: '足具' },
        { id: 'accessorySelect', label: 'アクセ' }
      ];
      const totals = [0, 0, 0, 0, 0, 0];
      const selectedNames = [];

      selects.forEach(sel => {
        const el = document.getElementById(sel.id);
        if (el.value) {
          const values = el.value.split(',').map(parseFloat);
          values.forEach((v, i) => totals[i] += v);
          selectedNames.push(`${sel.label}：${el.options[el.selectedIndex].text}`);
        }
      });

      document.getElementById('totalSTR').innerText = totals[0].toFixed(1) + '%';
      document.getElementById('totalDEX').innerText = totals[1].toFixed(1) + '%';
      document.getElementById('totalAGI').innerText = totals[2].toFixed(1) + '%';
      document.getElementById('totalINT').innerText = totals[3].toFixed(1) + '%';
      document.getElementById('totalVIT').innerText = totals[4].toFixed(1) + '%';
      document.getElementById('totalLUK').innerText = totals[5].toFixed(1) + '%';

      document.getElementById('selectedNames').innerText = '装備: ' + (selectedNames.length ? selectedNames.join(' / ') : 'なし');
    }
  </script>

</body>
</html>